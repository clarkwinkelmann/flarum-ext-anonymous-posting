{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,wBCL/C,SAASC,IAYtB,OAXAA,EAAWZ,OAAOa,OAASb,OAAOa,OAAOC,OAAS,SAAUC,GAC1D,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAASF,UAAUD,GACvB,IAAK,IAAIlB,KAAOqB,EACVnB,OAAOM,UAAUC,eAAeC,KAAKW,EAAQrB,KAC/CiB,EAAOjB,GAAOqB,EAAOrB,GAG3B,CACA,OAAOiB,CACT,EACOH,EAASQ,MAAMC,KAAMJ,UAC9B,C,OCbA,MAAM,EAA+BK,OAAOC,KAAKC,OAAO,a,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,0B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,sB,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,uC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,qC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,iC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,gC,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,kC,m0BC4BxD,SAASC,IACLC,IAAAA,SAAAA,OAAAA,cAAqCA,IAAAA,MAAAA,UAAoB,uBAC7D,CAEA,SAASC,EAAoEC,GACzE,GAAKF,IAAAA,MAAAA,UAAoB,sBAAzB,CAIA,IAAMG,EAAWH,IAAAA,WAAAA,MAAqB,0EAChCI,EAAmBJ,IAAAA,MAAAA,UAAoB,6BAE7CE,EAAMG,IAAI,oBAAqBC,IAAAA,UAAiB,CAC5CC,UAAgC,YAArBH,EAAiC,+BAAiC,GAC7EI,QAASR,IAAAA,SAAAA,OAAAA,YACTS,SAAU,SAACxB,GACPe,IAAAA,SAAAA,OAAAA,YAAmCf,CACvC,GACDyB,EAAE,8BAA+B,CAChCV,IAAAA,WAAAA,MAAqB,sEACA,YAArBI,EAAiC,CAAC,IAAKO,IAAAA,UAAkB,CACrDC,KAAMT,GACPU,IAAK,qBAAsB,CAC1BN,UAAW,4BACR,KACc,YAArBH,EAAiCM,EAAE,YAAaP,GAAY,SAC1D,GAnBN,CAoBJ,CAEA,SAASW,EAA6DC,GAClEA,EAAKC,cAAgBhB,IAAAA,SAAAA,OAAAA,WACzB,CAEA,SAASiB,GAA6DC,GAAW,IAAAC,EAAA,KACxEnB,IAAAA,SAAAA,OAAAA,aAIAkB,GAASE,MAAMC,QAAQH,EAAKI,WAKjCJ,EAAKI,SAASC,SAAQ,SAAAL,GACbA,GAASE,MAAMC,QAAQH,EAAKI,WAKjCJ,EAAKI,SAASC,SAAQ,SAACC,EAAOC,GACrBD,GAAUA,EAAME,OAAUF,EAAME,MAAMnB,YAAuE,IAA1DiB,EAAME,MAAMnB,UAAUoB,QAAQ,yBAGlF,SAAU,oBACVT,EAAKI,SAASG,GAASG,GAAgB5B,IAAAA,MAAW,uBAAwB,aAAcA,IAAAA,SAAAA,OAAAA,MACjFmB,aAAgBU,KAAiB7B,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,eAAyD,SAAU,sDAC3GkB,EAAKI,SAASG,GAASG,GAAgB5B,IAAAA,MAAW,uBAAwB,OAAQA,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,cAAAA,KAAAA,MAElFkB,EAAKI,SAASG,GAASG,GAAgB5B,IAAAA,MAAW,wBAE1D,GACJ,GACJ,CAEA,SAAS8B,GAAoBC,GACzB,MAAO,CACHC,IAAKD,EAAQE,gBACbC,IAAKH,EAAQI,cAErB,CAEA,SAASP,GAAgBQ,EAAiC7B,EAAwB8B,EAAuBC,QAA9B,IAAjB/B,IAAAA,EAAoB,IAC1E,IAEIgC,EAkBR,SAA8BC,EAAoBH,EAAcI,EAASH,GACrE,IAAIC,EAAW,KACf,GAAID,GAAgBG,GAAWJ,KAAgBI,EAE3C,IADA,IAC8BC,EAD1BC,EAAmBF,EAAQJ,GAC/BO,EAAAC,EAAkBP,KAAYI,EAAAE,KAAAE,MAAE,KAArBC,EAAGL,EAAAzD,MAKN+D,EAAoB,QAAZD,EAAIE,KAAgBF,EAAIG,GAAsB,QAAjBH,EAAIhC,KAAKkC,KAAgBE,OAAOJ,EAAIhC,KAAKmC,IAAK,KACvF,GAAIF,KAASL,EAAkB,CAC3BJ,EAAWT,GAAoBa,EAAiBK,IAChD,KACJ,CACJ,CAQJ,OANgB,MAAZT,GAAoBC,IACpBD,EAAW,CACPP,IAAKQ,EACLN,IAAKlC,IAAAA,WAAAA,MAAqB,6DAG3BuC,CACX,CAzCmBa,CAFYhB,EAAKiB,UAAU,sBAEchB,EADxCD,EAAKiB,UAAU,sBACgDf,GAC/E,OAAIC,EACIA,EAASP,IACFtB,EAAE,+BAAiCH,EAAW,CACjD+C,IAAKf,EAASP,IACdE,IAAKK,EAASL,MAGXxB,EAAE,kCAAoCH,EAAW,CACpD2B,IAAKK,EAASL,IACdqB,MAAO,yBACRhB,EAASL,IAAIsB,OAAO,GAAGC,eAI3B/C,EAAE,gCAAkCH,EAAWP,IAAAA,WAAAA,MAAqB,2DAC/E,CAyCAA,IAAAA,aAAAA,IAAqB,qBAAqB,YACtC0D,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,eAAe,SAAUzD,GAAO,IAAA0D,EAAA,KACnDxB,EAAQzC,KAAK+B,MAAbU,KAEP,GAAKA,EAAKiB,UAAU,eAApB,CAWA,GAPAnD,EAAM2D,WAAW,OAAQnD,EAAE,YAAaA,EAAE,KAAM,CAC5CkB,GAAgBQ,EAAM,oBACtB1B,EAAE,gBAAiBV,IAAAA,WAAAA,MAAqB,iEAGtB8D,IAAAA,OAAmB,iBAAiBhF,KAAKsD,GAE3C,CAChB,IAAKA,EAAKiB,UAAU,iBAChB,OAGJ,IAAI9C,EAAY,4BACZwD,EAAc/D,IAAAA,WAAAA,MAAqB,gEACnCgE,EAAYhE,IAAAA,WAAAA,MAAqB,4DAgBrC,OAdIA,IAAAA,QAAAA,QAAoBiE,OACpB1D,EAAY,+BACZwD,EAAc/D,IAAAA,WAAAA,MAAqB,mEACnCgE,EAAYhE,IAAAA,WAAAA,MAAqB,qEAGrCE,EAAMG,IACF,uBACAM,IAAAA,UAAkB,CACdC,KAAMmD,GACPrD,EAAE,4BAA8BH,EAAWyD,IAC9C,GAIR,CAGA,IAAME,EAAc,IAAIC,IAAJ,CAAQjF,EAAC,CAAC,EACvBkD,EAAKrB,KAAI,CACZqD,cAAalF,EAAA,GACNkD,EAAKrB,KAAKqD,cAAa,CAC1BC,KAAMjC,EAAKrB,KAAKqD,cAAeE,mBAIvCpE,EAAMG,IACF,gBACAkE,IAAAA,UAAmB,CACfnC,KAAM8B,EACNM,YAAa7E,KAAK6E,YAClBC,WAAY,WACRb,EAAKY,aAAc,EACnB9D,EAAEgE,QACN,EACAC,WAAY,WACRf,EAAKY,aAAc,EACnB9D,EAAEgE,QACN,IAEJ,GA1DJ,CA4DJ,KAEAhB,EAAAA,EAAAA,QAAOkB,IAAAA,UAA4B,QAAQ,SAAUC,GAC5C7E,IAAAA,SAAAA,OAAAA,aAIA6E,GAAUzD,MAAMC,QAAQwD,EAAMvD,WAKnCuD,EAAMvD,SAASC,SAAQ,SAAAuD,GACdA,GAAU1D,MAAMC,QAAQyD,EAAMxD,WAKnCwD,EAAMxD,SAASC,SAAQ,SAACwD,GACfA,GAAU3D,MAAMC,QAAQ0D,EAAMzD,WAKnCyD,EAAMzD,SAASC,SAAQ,SAACyD,EAAOC,GACtBD,GAAU5D,MAAMC,QAAQ2D,EAAM1D,YAKnC0D,EAAM1D,SAASC,SAAQ,SAACC,EAAOC,GACtBD,GAAUA,EAAME,OAAUF,EAAME,MAAMnB,aAKe,IAAtDiB,EAAME,MAAMnB,UAAUoB,QAAQ,qBAC1B3B,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,eAAyD,SAAU,sDAEnEgF,EAAM1D,SAASG,GAASG,GAAgB5B,IAAAA,MAAW,mBAAoB,OAAQA,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,cAAAA,KAAAA,MAE/EgF,EAAM1D,SAASG,GAASG,GAAgB5B,IAAAA,MAAW,qBAK7B,aAA1BwB,EAAME,MAAMnB,YACRP,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,eAAyD,SAAU,sDAEnEwB,EAAMZ,KAjItC,SAA4BwB,EAAME,GAC9B,IAAMG,EAAUL,EAAKiB,UAAU,sBAC/B,GAAIf,GAAgBG,GAAW,SAAUA,EAErC,IADA,IAC8ByC,EAD1BvC,EAAmBF,EAAc,KACrC0C,EAAAtC,EAAkBP,KAAY4C,EAAAC,KAAArC,MAAE,KACxBE,EADMkC,EAAAjG,MACMiE,GAChB,GAAIF,KAASL,EACT,OAAOb,GAAoBa,EAAiBK,IAAQd,GAE5D,CAEJ,OAAOlC,IAAAA,WAAAA,MAAqB,0DAChC,CAqH6CoF,CAAmBpF,IAAAA,MAAWA,IAAAA,SAAAA,KAAAA,MAAAA,WAAAA,KAAAA,cAAAA,KAAAA,MAE3CwB,EAAMZ,KAAOZ,IAAAA,WAAAA,MAAqB,4DAI9C,IAGIgF,EAAMtD,OAASsD,EAAMtD,MAAMnB,YAAmE,IAAtDyE,EAAMtD,MAAMnB,UAAUoB,QAAQ,oBACtEoD,EAAMzD,SAAS+D,OAAOJ,EAAQ,GAEtC,GACJ,GACJ,GACJ,KAEAvB,EAAAA,EAAAA,QAAO4B,IAAAA,UAA8B,QAAQ,SAAUpE,GAEnD,IAAMqE,EAAa5F,KAAK+B,MAAM6D,WAEzBA,EAAWlC,UAAU,gBAI1BnC,EAAKI,SAASC,SAAQ,SAAAL,GACbA,GAASA,EAAKQ,OAAUR,EAAKQ,MAAMnB,YAA6E,IAAhEW,EAAKQ,MAAMnB,UAAUoB,QAAQ,+BAIlFT,EAAKI,SAASC,SAAQ,SAAAL,GACbA,GAAQA,EAAK6B,MAAQpC,MAI1BO,EAAKQ,MAAMd,KAAOZ,IAAAA,WAAAA,MAAqB,0CAA2C,CAC9EwF,SAAUxF,IAAAA,WAAAA,MAAqB,2DAC/ByF,IAAKC,IAAUH,EAAWI,eAG9BzE,EAAKI,SAASC,SAAQ,SAAAL,GACbA,GAAQA,EAAK6B,MAAQ6C,MAI1B1E,EAAKI,SAAW,CACZM,GAAgB2D,IAExB,IACJ,GACJ,GACJ,KAEA7B,EAAAA,EAAAA,QAAOmC,IAAAA,UAAuB,QAAQ,SAAU3E,GAAM,IAAA4E,EAAA,KAC7CnG,KAAK+B,MAAMU,KAAKiB,UAAU,gBAI/BnC,EAAKI,SAASC,SAAQ,SAAAwE,GACbA,GAAYA,EAAQrE,OAAUqE,EAAQrE,MAAMnB,YAAyE,IAA5DwF,EAAQrE,MAAMnB,UAAUoB,QAAQ,wBAI9FoE,EAAQzE,SAASC,SAAQ,SAACC,EAAOC,GACzBD,GAASA,EAAME,OAASF,EAAME,MAAMnB,WAAyD,IAA5CiB,EAAME,MAAMnB,UAAUoB,QAAQ,WAC/EoE,EAAQzE,SAAS+D,OAAO5D,EAAO,EAAGG,GAAgBkE,EAAKpE,MAAMU,MAErE,GACJ,GACJ,KAEA4D,EAAAA,EAAAA,UAASC,IAAAA,UAAwB,QAAQ,SAAUC,GACN,IAAzC,IAAMX,EAAa5F,KAAK+B,MAAM6D,WAAWY,EAAA5G,UAAAC,OADmB4G,EAAI,IAAAhF,MAAA+E,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJD,EAAIC,EAAA,GAAA9G,UAAA8G,GAGhE,OAAI1G,KAAK+B,MAAM4E,UAAYf,EAAWgB,aAC9BhB,EAAWiB,iBACJN,EAAQxG,WAAC,EAAG0G,GAMhB1F,EAAE,OAAQ,CACbG,IAAK,gBACL,IACAb,IAAAA,WAAAA,MAAqB,0EAA2E,CAC5FyF,IAAKC,IAAUH,EAAWkB,oBAKjClB,EAAWlC,UAAU,eAInB3C,EAAE,OAAQ,CACb,GACA,IACAV,IAAAA,WAAAA,MAAqB,0CAA2C,CAC5DwF,SAAU9E,EAAE,gBAAiBV,IAAAA,WAAAA,MAAqB,4DAClDyF,IAAKC,IAAUH,EAAWI,iBARvBO,EAAQxG,WAAC,EAAG0G,EAW3B,KAEA1C,EAAAA,EAAAA,QAAOC,IAAAA,UAAuB,UAAU,WAAY,IAAA+C,EAAA,KAChD/G,KAAKgH,QAASC,OAAM,WAChB,OAAOF,EAAKhF,MAAMU,KAAKiB,UAAU,cACrC,GACJ,KAEAK,EAAAA,EAAAA,QAAOmD,IAAAA,UAA8B,SAAU9G,IAC/C2D,EAAAA,EAAAA,QAAOmD,IAAAA,UAA8B,cAAe5G,IACpDyD,EAAAA,EAAAA,QAAOmD,IAAAA,UAA8B,OAAQ/F,IAC7C4C,EAAAA,EAAAA,QAAOmD,IAAAA,UAA8B,OAAQ5F,KAC7CyC,EAAAA,EAAAA,QAAO7B,IAAAA,UAAyB,SAAU9B,IAC1C2D,EAAAA,EAAAA,QAAO7B,IAAAA,UAAyB,cAAe5B,IAC/CyD,EAAAA,EAAAA,QAAO7B,IAAAA,UAAyB,OAAQf,IACxC4C,EAAAA,EAAAA,QAAO7B,IAAAA,UAAyB,OAAQZ,KAExCyC,EAAAA,EAAAA,QAAOoD,IAAoB,sBAAsB,SAAU5G,EAAOqF,GAC1DA,EAAWlC,UAAU,mBACrBnD,EAAMG,IAAI,cAAe0G,IAAAA,UAAiB,CACtClG,KAAM,qBACNmG,QAAS,WACAC,QAAQC,IAAYlH,IAAAA,WAAAA,MAAqB,yFAI9CuF,EAAW4B,KAAK,CACZnG,aAAa,IACdoG,MAAK,WACJ1G,EAAEgE,QACN,GACJ,GACD1E,IAAAA,WAAAA,MAAqB,4EAGxBuF,EAAWlC,UAAU,iBACrBnD,EAAMG,IAAI,YAAa0G,IAAAA,UAAiB,CACpClG,KAAM,qBACNmG,QAAS,WACAC,QAAQC,IAAYlH,IAAAA,WAAAA,MAAqB,uFAI9CuF,EAAW4B,KAAK,CACZnG,aAAa,IACdoG,MAAK,WACJ1G,EAAEgE,QACN,GACJ,GACD1E,IAAAA,WAAAA,MAAqB,yEAEhC,KAEA0D,EAAAA,EAAAA,QAAO2D,IAAc,sBAAsB,SAAUnH,EAAOkC,GACpDA,EAAKiB,UAAU,mBACfnD,EAAMG,IAAI,cAAe0G,IAAAA,UAAiB,CACtClG,KAAM,qBACNmG,QAAS,WACAC,QAAQC,IAAYlH,IAAAA,WAAAA,MAAqB,mFAI9CoC,EAAK+E,KAAK,CACNnG,aAAa,IACdoG,MAAK,WACJ1G,EAAEgE,QACN,GACJ,GACD1E,IAAAA,WAAAA,MAAqB,sEAGxBoC,EAAKiB,UAAU,iBACfnD,EAAMG,IAAI,YAAa0G,IAAAA,UAAiB,CACpClG,KAAM,qBACNmG,QAAS,YACiB,IAAlB5E,EAAKkF,UACAL,QAAQC,IAAYlH,IAAAA,WAAAA,MAAqB,kFAKlDoC,EAAK+E,KAAK,CACNnG,aAAa,IACdoG,MAAK,WACJ1G,EAAEgE,QACN,GACJ,GACD1E,IAAAA,WAAAA,MAAqB,mEAEhC,KAGAgG,EAAAA,EAAAA,UAASuB,IAAAA,UAAoB,SAAS,SAAUrB,GAC5C,IAAMsB,EAAqB7H,KAAK8H,EAAE,iCAElCD,EAAmB7I,KAAK,YAAY,GAEpC,IAAM+I,EAAcxB,IAIpB,OAFAsB,EAAmB7I,KAAK,YAAY,GAE7B+I,CACX,GACJ,G","sources":["webpack://@clarkwinkelmann/anonymous-posting/webpack/bootstrap","webpack://@clarkwinkelmann/anonymous-posting/webpack/runtime/compat get default export","webpack://@clarkwinkelmann/anonymous-posting/webpack/runtime/define property getters","webpack://@clarkwinkelmann/anonymous-posting/webpack/runtime/hasOwnProperty shorthand","webpack://@clarkwinkelmann/anonymous-posting/webpack/runtime/make namespace object","webpack://@clarkwinkelmann/anonymous-posting/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/app']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/extend']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/utils/humanTime']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/components/Link']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/Model']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['common/models/Post']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/utils/PostControls']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/Composer']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/DiscussionComposer']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/ReplyComposer']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/PostUser']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/ReplyPlaceholder']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/TerminalPost']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/PostPreview']\"","webpack://@clarkwinkelmann/anonymous-posting/external root \"flarum.core.compat['forum/components/PostsUserPage']\"","webpack://@clarkwinkelmann/anonymous-posting/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/humanTime'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/DiscussionControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/utils/PostControls'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/Composer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ReplyComposer'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostUser'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionListItem'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/ReplyPlaceholder'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/TerminalPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostPreview'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostsUserPage'];","import app from 'flarum/forum/app';\r\nimport {extend, override} from 'flarum/common/extend';\r\nimport humanTime from 'flarum/common/utils/humanTime';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport ItemList from 'flarum/common/utils/ItemList';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Link from 'flarum/common/components/Link';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\nimport Model from 'flarum/common/Model';\r\nimport Discussion from 'flarum/common/models/Discussion';\r\nimport Post from 'flarum/common/models/Post';\r\nimport Forum from 'flarum/common/models/Forum';\r\nimport User from 'flarum/common/models/User';\r\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\r\nimport PostControls from 'flarum/forum/utils/PostControls';\r\nimport CommentPost from 'flarum/forum/components/CommentPost';\r\nimport Composer from 'flarum/forum/components/Composer';\r\nimport DiscussionComposer from 'flarum/forum/components/DiscussionComposer';\r\nimport ReplyComposer from 'flarum/forum/components/ReplyComposer';\r\nimport PostUser from 'flarum/forum/components/PostUser';\r\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\r\nimport ReplyPlaceholder from 'flarum/forum/components/ReplyPlaceholder';\r\nimport TerminalPost from 'flarum/forum/components/TerminalPost';\r\nimport PostPreview from 'flarum/forum/components/PostPreview';\r\nimport PostsUserPage from 'flarum/forum/components/PostsUserPage';\r\n\r\nfunction extendComposerInit(this: DiscussionComposer | ReplyComposer) {\r\n    app.composer.fields!.isAnonymous = !!app.forum.attribute('defaultAnonymousPost');\r\n}\r\n\r\nfunction extendComposerHeaderItems(this: DiscussionComposer | ReplyComposer, items: ItemList<any>) {\r\n    if (!app.forum.attribute('canAnonymousSwitch')) {\r\n        return;\r\n    }\r\n\r\n    const helpText = app.translator.trans('clarkwinkelmann-anonymous-posting.forum.composerControls.anonymizeHelp');\r\n    const helpTextPosition = app.forum.attribute('anonymousHelpTextPosition');\r\n\r\n    items.add('anonymous-posting', Switch.component({\r\n        className: helpTextPosition === 'visible' ? 'AnonymousCheckbox--multiline' : '',\r\n        state: !!app.composer.fields!.isAnonymous,\r\n        onchange: (value: boolean) => {\r\n            app.composer.fields!.isAnonymous = value;\r\n        },\r\n    }, m('span.AnonymousCheckboxLabel', [\r\n        app.translator.trans('clarkwinkelmann-anonymous-posting.forum.composerControls.anonymize'),\r\n        helpTextPosition === 'tooltip' ? [' ', Tooltip.component({\r\n            text: helpText,\r\n        }, icon('fas fa-info-circle', {\r\n            className: 'AnonymousCheckboxInfo',\r\n        }))] : null,\r\n        helpTextPosition === 'visible' ? m('.helpText', helpText) : null,\r\n    ])), -10);\r\n}\r\n\r\nfunction extendComposerData(this: DiscussionComposer | ReplyComposer, data: any) {\r\n    data.isAnonymous = !!app.composer.fields!.isAnonymous;\r\n}\r\n\r\nfunction extendComposerView(this: DiscussionComposer | ReplyComposer, vdom: any) {\r\n    if (!app.composer.fields!.isAnonymous) {\r\n        return;\r\n    }\r\n\r\n    if (!vdom || !Array.isArray(vdom.children)) {\r\n        return;\r\n    }\r\n\r\n    // Loop through <ConfirmDocumentUnload> children\r\n    vdom.children.forEach(vdom => {\r\n        if (!vdom || !Array.isArray(vdom.children)) {\r\n            return;\r\n        }\r\n\r\n        // Loop through .ComposerBody children\r\n        vdom.children.forEach((child, index) => {\r\n            if (!child || !child.attrs || !child.attrs.className || child.attrs.className.indexOf('ComposerBody-avatar') === -1) {\r\n                return;\r\n            }\r\n            if (\"tags\" in app.composer.fields) {\r\n                vdom.children[index] = anonymousAvatar(app.forum, '.ComposerBody-avatar', \"Discussion\", app.composer.fields.tags);\r\n            } else if (this instanceof ReplyComposer && app.composer.body.attrs.discussion.data.relationships && \"tags\" in app.composer.body.attrs.discussion.data.relationships) {\r\n                vdom.children[index] = anonymousAvatar(app.forum, '.ComposerBody-avatar', \"Post\", app.composer.body.attrs.discussion.data.relationships.tags.data);\r\n            } else {\r\n                vdom.children[index] = anonymousAvatar(app.forum, '.ComposerBody-avatar');\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction getAnonymousProfile(profile: { [key: string]: any }) {\r\n    return {\r\n        url: profile.user_avatar_url,\r\n        alt: profile.user_username,\r\n    };\r\n}\r\n\r\nfunction anonymousAvatar(post: Discussion | Post | Forum, className: string = '', composerType?: string, selectedTags?: []) {\r\n    const anonymousAvatarUrl = post.attribute('anonymousAvatarUrl');\r\n    const allTags = post.attribute('anonymousImposters');\r\n    var imageSrc = processDisplayAvatar(anonymousAvatarUrl, composerType, allTags, selectedTags);\r\n    if (imageSrc) {\r\n        if (imageSrc.url) {\r\n            return m('img.Avatar.Avatar--anonymous' + className, {\r\n                src: imageSrc.url,\r\n                alt: imageSrc.alt,\r\n            });\r\n        } else {\r\n            return m('span.Avatar ComposerBody-avatar' + className, {\r\n                alt: imageSrc.alt,\r\n                style: '--avatar-bg: #a0e5b3;',\r\n            }, imageSrc.alt.charAt(0).toUpperCase());\r\n        }\r\n    }\r\n\r\n    return m('span.Avatar.Avatar--anonymous' + className, app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.initials'));\r\n}\r\n\r\nfunction processDisplayAvatar(anonymousAvatarUrl, composerType, allTags, selectedTags) {\r\n    var imageSrc = null;\r\n    if (selectedTags && allTags && composerType in allTags) {\r\n        var composerTypeTags = allTags[composerType];\r\n        for (const tag of selectedTags) {\r\n            /* Different structure for Post and Discussion\r\n             * .type = Post\r\n             * .data.type = Discussion\r\n             */\r\n            var tagId = tag.type == \"tags\"? tag.id: (tag.data.type == \"tags\"? Number(tag.data.id): null);\r\n            if (tagId in composerTypeTags) {\r\n                imageSrc = getAnonymousProfile(composerTypeTags[tagId]);\r\n                break;\r\n            }\r\n        }; \r\n    }\r\n    if (imageSrc == null && anonymousAvatarUrl) {\r\n        imageSrc = {\r\n            url: anonymousAvatarUrl,\r\n            alt: app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username'),\r\n        };\r\n    }\r\n    return imageSrc;\r\n}\r\n\r\nfunction processDisplayName(post, selectedTags) {\r\n    const allTags = post.attribute('anonymousImposters');\r\n    if (selectedTags && allTags && 'Post' in allTags) {\r\n        var composerTypeTags = allTags['Post'];\r\n        for (const tag of selectedTags) {\r\n            var tagId = tag.id;\r\n            if (tagId in composerTypeTags) {\r\n                return getAnonymousProfile(composerTypeTags[tagId]).alt;\r\n            }\r\n        }; \r\n    }\r\n    return app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username');\r\n}\r\n\r\napp.initializers.add('anonymous-posting', () => {\r\n    extend(CommentPost.prototype, 'headerItems', function (items) {\r\n        const {post} = this.attrs;\r\n\r\n        if (!post.attribute('isAnonymous')) {\r\n            return;\r\n        }\r\n\r\n        items.setContent('user', m('.PostUser', m('h3', [\r\n            anonymousAvatar(post, '.PostUser-avatar'),\r\n            m('span.username', app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username')),\r\n        ])));\r\n\r\n        const anonymousUser = Model.hasOne<User>('anonymousUser').call(post);\r\n\r\n        if (!anonymousUser) {\r\n            if (!post.attribute('isAnonymousMe')) {\r\n                return;\r\n            }\r\n\r\n            let className = '.AnonymousPostPrivacyMine';\r\n            let tooltipText = app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postPrivacy.mineHelp');\r\n            let labelText = app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postPrivacy.mine');\r\n\r\n            if (app.current.matches(PostsUserPage)) {\r\n                className = '.AnonymousPostPrivacyProfile';\r\n                tooltipText = app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postPrivacy.profileHelp');\r\n                labelText = app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postPrivacy.profile');\r\n            }\r\n\r\n            items.add(\r\n                'anonymousUserPrivacy',\r\n                Tooltip.component({\r\n                    text: tooltipText,\r\n                }, m('span.AnonymousPostPrivacy' + className, labelText)),\r\n                90 // Just after the original user label\r\n            );\r\n\r\n            return;\r\n        }\r\n\r\n        // Provide an altered post object that the PostUser component can read the user from\r\n        const alteredPost = new Post({\r\n            ...post.data,\r\n            relationships: {\r\n                ...post.data.relationships,\r\n                user: post.data.relationships!.anonymousUser,\r\n            },\r\n        });\r\n\r\n        items.add(\r\n            'anonymousUser',\r\n            PostUser.component({\r\n                post: alteredPost,\r\n                cardVisible: this.cardVisible,\r\n                oncardshow: () => {\r\n                    this.cardVisible = true;\r\n                    m.redraw();\r\n                },\r\n                oncardhide: () => {\r\n                    this.cardVisible = false;\r\n                    m.redraw();\r\n                },\r\n            }),\r\n            90 // Just after the original user label\r\n        );\r\n    });\r\n\r\n    extend(ReplyPlaceholder.prototype, 'view', function (vdom0) {\r\n        if (!app.composer.fields!.isAnonymous) {\r\n            return;\r\n        }\r\n\r\n        if (!vdom0 || !Array.isArray(vdom0.children)) {\r\n            return;\r\n        }\r\n\r\n        // Loop through .Post children\r\n        vdom0.children.forEach(vdom1 => {\r\n            if (!vdom1 || !Array.isArray(vdom1.children)) {\r\n                return;\r\n            }\r\n\r\n            // Loop through .Post-header children\r\n            vdom1.children.forEach((vdom2) => {\r\n                if (!vdom2 || !Array.isArray(vdom2.children)) {\r\n                    return;\r\n                }\r\n\r\n                // Loop through .PostUser children\r\n                vdom2.children.forEach((vdom3, index3) => {\r\n                    if (!vdom3 || !Array.isArray(vdom3.children)) {\r\n                        return;\r\n                    }\r\n\r\n                    // Loop through <h3> children\r\n                    vdom3.children.forEach((child, index) => {\r\n                        if (!child || !child.attrs || !child.attrs.className) {\r\n                            return;\r\n                        }\r\n\r\n                        // Replace preview avatar\r\n                        if (child.attrs.className.indexOf('PostUser-avatar') !== -1) {\r\n                            if (app.composer.body.attrs.discussion.data.relationships && \"tags\" in app.composer.body.attrs.discussion.data.relationships) {\r\n                                // Replace preview avatar with specific tags settings\r\n                                vdom3.children[index] = anonymousAvatar(app.forum, '.PostUser-avatar', \"Post\", app.composer.body.attrs.discussion.data.relationships.tags.data);\r\n                            } else {\r\n                                vdom3.children[index] = anonymousAvatar(app.forum, '.PostUser-avatar');\r\n                            }\r\n                        }\r\n\r\n                        // Replace preview username\r\n                        if (child.attrs.className === 'username') {\r\n                            if (app.composer.body.attrs.discussion.data.relationships && \"tags\" in app.composer.body.attrs.discussion.data.relationships) {\r\n                                // Replace preview display name with specific tags settings\r\n                                child.text = processDisplayName(app.forum, app.composer.body.attrs.discussion.data.relationships.tags.data);\r\n                            } else {\r\n                                child.text = app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username');\r\n                            }\r\n                            \r\n                        }\r\n                    });\r\n\r\n                    // Remove ul.PostUser-badges which would show the actor's badges\r\n                    if (vdom3.attrs && vdom3.attrs.className && vdom3.attrs.className.indexOf('PostUser-badges') !== -1) {\r\n                        vdom2.children.splice(index3, 1);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    });\r\n\r\n    extend(DiscussionListItem.prototype, 'view', function (vdom) {\r\n        // @ts-ignore\r\n        const discussion = this.attrs.discussion as Discussion;\r\n\r\n        if (!discussion.attribute('isAnonymous')) {\r\n            return;\r\n        }\r\n\r\n        vdom.children.forEach(vdom => {\r\n            if (!vdom || !vdom.attrs || !vdom.attrs.className || vdom.attrs.className.indexOf('DiscussionListItem-content') === -1) {\r\n                return;\r\n            }\r\n\r\n            vdom.children.forEach(vdom => {\r\n                if (!vdom || vdom.tag !== Tooltip) {\r\n                    return;\r\n                }\r\n\r\n                vdom.attrs.text = app.translator.trans('core.forum.discussion_list.started_text', {\r\n                    username: app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username'),\r\n                    ago: humanTime(discussion.createdAt()),\r\n                });\r\n\r\n                vdom.children.forEach(vdom => {\r\n                    if (!vdom || vdom.tag !== Link) {\r\n                        return;\r\n                    }\r\n\r\n                    vdom.children = [\r\n                        anonymousAvatar(discussion),\r\n                    ];\r\n                });\r\n            });\r\n        });\r\n    });\r\n\r\n    extend(PostPreview.prototype, 'view', function (vdom) {\r\n        if (!this.attrs.post.attribute('isAnonymous')) {\r\n            return;\r\n        }\r\n\r\n        vdom.children.forEach(preview => {\r\n            if (!preview || !preview.attrs || !preview.attrs.className || preview.attrs.className.indexOf('PostPreview-content') === -1) {\r\n                return;\r\n            }\r\n\r\n            preview.children.forEach((child, index) => {\r\n                if (child && child.attrs && child.attrs.className && child.attrs.className.indexOf('Avatar') === 0) {\r\n                    preview.children.splice(index, 1, anonymousAvatar(this.attrs.post));\r\n                }\r\n            });\r\n        });\r\n    });\r\n\r\n    override(TerminalPost.prototype, 'view', function (original, ...args) {\r\n        const discussion = this.attrs.discussion;\r\n\r\n        if (this.attrs.lastPost && discussion.replyCount()) {\r\n            if (discussion.lastPostedUser()) {\r\n                return original(...args);\r\n            }\r\n\r\n            // Loading discussion.lastPost for the sole purpose of getting post.isAnonymous would be detrimental to performance\r\n            // Instead we'll replace all \"[deleted] replied\" texts with a generic message that doesn't include a username\r\n\r\n            return m('span', [\r\n                icon('fas fa-reply'),\r\n                ' ',\r\n                app.translator.trans('clarkwinkelmann-anonymous-posting.forum.discussionList.genericReplyText', {\r\n                    ago: humanTime(discussion.lastPostedAt()),\r\n                }),\r\n            ]);\r\n        }\r\n\r\n        if (!discussion.attribute('isAnonymous')) {\r\n            return original(...args);\r\n        }\r\n\r\n        return m('span', [\r\n            '', // Keep output the same as original method to maximise compatibility with other extensions\r\n            ' ',\r\n            app.translator.trans('core.forum.discussion_list.started_text', {\r\n                username: m('span.username', app.translator.trans('clarkwinkelmann-anonymous-posting.lib.userMeta.username')),\r\n                ago: humanTime(discussion.createdAt()),\r\n            }),\r\n        ]);\r\n    });\r\n\r\n    extend(CommentPost.prototype, 'oninit', function () {\r\n        this.subtree!.check(() => {\r\n            return this.attrs.post.attribute('isAnonymous');\r\n        });\r\n    });\r\n\r\n    extend(DiscussionComposer.prototype, 'oninit', extendComposerInit);\r\n    extend(DiscussionComposer.prototype, 'headerItems', extendComposerHeaderItems);\r\n    extend(DiscussionComposer.prototype, 'data', extendComposerData);\r\n    extend(DiscussionComposer.prototype, 'view', extendComposerView);\r\n    extend(ReplyComposer.prototype, 'oninit', extendComposerInit);\r\n    extend(ReplyComposer.prototype, 'headerItems', extendComposerHeaderItems);\r\n    extend(ReplyComposer.prototype, 'data', extendComposerData);\r\n    extend(ReplyComposer.prototype, 'view', extendComposerView);\r\n\r\n    extend(DiscussionControls, 'moderationControls', function (items, discussion) {\r\n        if (discussion.attribute('canDeAnonymize')) {\r\n            items.add('deanonymize', Button.component({\r\n                icon: 'fas fa-user-secret',\r\n                onclick: () => {\r\n                    if (!confirm(extractText(app.translator.trans('clarkwinkelmann-anonymous-posting.forum.discussionControls.deanonymizeConfirmation')))) {\r\n                        return;\r\n                    }\r\n\r\n                    discussion.save({\r\n                        isAnonymous: false,\r\n                    }).then(() => {\r\n                        m.redraw();\r\n                    });\r\n                },\r\n            }, app.translator.trans('clarkwinkelmann-anonymous-posting.forum.discussionControls.deanonymize')));\r\n        }\r\n\r\n        if (discussion.attribute('canAnonymize')) {\r\n            items.add('anonymize', Button.component({\r\n                icon: 'fas fa-user-secret',\r\n                onclick: () => {\r\n                    if (!confirm(extractText(app.translator.trans('clarkwinkelmann-anonymous-posting.forum.discussionControls.anonymizeConfirmation')))) {\r\n                        return;\r\n                    }\r\n\r\n                    discussion.save({\r\n                        isAnonymous: true,\r\n                    }).then(() => {\r\n                        m.redraw();\r\n                    });\r\n                },\r\n            }, app.translator.trans('clarkwinkelmann-anonymous-posting.forum.discussionControls.anonymize')));\r\n        }\r\n    });\r\n\r\n    extend(PostControls, 'moderationControls', function (items, post) {\r\n        if (post.attribute('canDeAnonymize')) {\r\n            items.add('deanonymize', Button.component({\r\n                icon: 'fas fa-user-secret',\r\n                onclick: () => {\r\n                    if (!confirm(extractText(app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postControls.deanonymizeConfirmation')))) {\r\n                        return;\r\n                    }\r\n\r\n                    post.save({\r\n                        isAnonymous: false,\r\n                    }).then(() => {\r\n                        m.redraw();\r\n                    });\r\n                },\r\n            }, app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postControls.deanonymize')));\r\n        }\r\n\r\n        if (post.attribute('canAnonymize')) {\r\n            items.add('anonymize', Button.component({\r\n                icon: 'fas fa-user-secret',\r\n                onclick: () => {\r\n                    if (post.number() === 1) {\r\n                        if (!confirm(extractText(app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postControls.firstPostConfirmation')))) {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    post.save({\r\n                        isAnonymous: true,\r\n                    }).then(() => {\r\n                        m.redraw();\r\n                    });\r\n                },\r\n            }, app.translator.trans('clarkwinkelmann-anonymous-posting.forum.postControls.anonymize')));\r\n        }\r\n    });\r\n\r\n    // Flarum will try to focus the checkbox in ReplyComposer instead of the body. To work around this, we'll temporarily disable the field while this method runs\r\n    override(Composer.prototype, 'focus', function (original) {\r\n        const $anonymousCheckbox = this.$('.item-anonymous-posting input');\r\n\r\n        $anonymousCheckbox.prop('disabled', true);\r\n\r\n        const returnValue = original();\r\n\r\n        $anonymousCheckbox.prop('disabled', false);\r\n\r\n        return returnValue;\r\n    });\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_extends","assign","bind","target","i","arguments","length","source","apply","this","flarum","core","compat","extendComposerInit","app","extendComposerHeaderItems","items","helpText","helpTextPosition","add","Switch","className","state","onchange","m","Tooltip","text","icon","extendComposerData","data","isAnonymous","extendComposerView","vdom","_this","Array","isArray","children","forEach","child","index","attrs","indexOf","anonymousAvatar","ReplyComposer","getAnonymousProfile","profile","url","user_avatar_url","alt","user_username","post","composerType","selectedTags","imageSrc","anonymousAvatarUrl","allTags","_step","composerTypeTags","_iterator","_createForOfIteratorHelperLoose","done","tag","tagId","type","id","Number","processDisplayAvatar","attribute","src","style","charAt","toUpperCase","extend","CommentPost","_this2","setContent","Model","tooltipText","labelText","PostsUserPage","alteredPost","Post","relationships","user","anonymousUser","PostUser","cardVisible","oncardshow","redraw","oncardhide","ReplyPlaceholder","vdom0","vdom1","vdom2","vdom3","index3","_step2","_iterator2","processDisplayName","splice","DiscussionListItem","discussion","username","ago","humanTime","createdAt","Link","PostPreview","_this3","preview","override","TerminalPost","original","_len","args","_key","lastPost","replyCount","lastPostedUser","lastPostedAt","_this4","subtree","check","DiscussionComposer","DiscussionControls","Button","onclick","confirm","extractText","save","then","PostControls","number","Composer","$anonymousCheckbox","$","returnValue"],"sourceRoot":""}