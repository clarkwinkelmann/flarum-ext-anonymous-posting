(()=>{var t={n:n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},d:(n,e)=>{for(var a in e)t.o(e,a)&&!t.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:e[a]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};(()=>{"use strict";t.r(n);const e=flarum.core.compat["admin/app"];var a=t.n(e);const r=flarum.core.compat["common/components/Button"];var o=t.n(r),s="anonymous-posting.formulaireAvatars",i="anonymous-posting.anonymousUsers",l="clarkwinkelmann-anonymous-posting.admin.settings.";a().initializers.add("anonymous-posting",(function(){a().extensionData.for("clarkwinkelmann-anonymous-posting").registerSetting({setting:"anonymous-posting.defaultAnonymity",label:a().translator.trans(l+"defaultAnonymity"),type:"switch"}).registerSetting({setting:"anonymous-posting.defaultAnonymityWhenAbleToSwitch",type:"switch",label:a().translator.trans(l+"defaultAnonymityWhenAbleToSwitch")}).registerSetting({setting:"anonymous-posting.alwaysAnonymiseEdits",type:"switch",label:a().translator.trans(l+"alwaysAnonymiseEdits"),help:a().translator.trans(l+"alwaysAnonymiseEditsHelp")}).registerSetting({setting:"anonymous-posting.composerHelpTextPosition",type:"select",options:{visible:a().translator.trans(l+"composerHelpTextPositionVisible"),tooltip:a().translator.trans(l+"composerHelpTextPositionTooltip"),hidden:a().translator.trans(l+"composerHelpTextPositionHidden")},default:"visible",label:a().translator.trans(l+"composerHelpTextPosition"),help:a().translator.trans(l+"composerHelpTextPositionHelp")}).registerSetting({setting:"anonymous-posting.defaultAnonymousUserProfile",label:a().translator.trans(l+"defaultAnonymousUserProfile"),required:!1,type:"number",help:a().translator.trans(l+"defaultAnonymousUserProfileHelp")}).registerSetting((function(){var t,n=this;try{t=JSON.parse(this.setting(i)())}catch(t){}return Array.isArray(t)||(t=[]),m(".Form-group",[m("label",a().translator.trans(l+"anonymousUserProfileByTags")),m(".helpText",a().translator.trans(l+"anonymousUserProfileByTagsHelp")),m("table",[m("thead",m("tr",[m("th",a().translator.trans(l+"anonymousUserProfileTagName")),m("th",a().translator.trans(l+"anonymousUserProfileUserId")),m("th",a().translator.trans(l+"anonymousUserProfileIsCreatingDiscussion")),m("th",a().translator.trans(l+"anonymousUserProfileIsCreatingPost")),m("th",a().translator.trans(l+"anonymousUserProfileIsEnabled")),m("th")])),m("tbody",[t.map((function(e,a){return m("tr",[m("td",m("input.FormControl",{type:"text",value:e.tagName||"",onchange:function(a){e.tagName=a.target.value,n.setting(i)(JSON.stringify(t))}})),m("td",m("input.FormControl",{type:"number",value:e.userId||"",onchange:function(a){e.userId=a.target.value,n.setting(i)(JSON.stringify(t))}})),m("td",m("input",{type:"checkbox",checked:e.isCreatingDiscussion,onchange:function(a){e.isCreatingDiscussion=a.target.checked,n.setting(i)(JSON.stringify(t))}})),m("td",m("input",{type:"checkbox",checked:e.isCreatingPost,onchange:function(a){e.isCreatingPost=a.target.checked,n.setting(i)(JSON.stringify(t))}})),m("td",m("input",{type:"checkbox",checked:e.isEnabled,onchange:function(a){e.isEnabled=a.target.checked,n.setting(i)(JSON.stringify(t))}})),m("td",o().component({className:"Button Button--icon",icon:"fas fa-times",onclick:function(){t.splice(a,1),n.setting(i)(t.length>0?JSON.stringify(t):null)}}))])})),m("tr",m("td",{colspan:5},o().component({className:"Button Button--block",onclick:function(){t.push({tagName:"",userId:null,isCreatingDiscussion:!1,isCreatingPost:!1,isEnabled:!1}),n.setting(i)(JSON.stringify(t))}},a().translator.trans(l+"anonymousUserProfileByTagsAdd"))))])])])})).registerSetting((function(){var t,n=this;try{t=JSON.parse(this.setting(s)())}catch(t){}return Array.isArray(t)||(t=[]),m(".Form-group",[m("label",a().translator.trans(l+"avatars")),m(".helpText",a().translator.trans(l+"avatarsHelp",{a:m("a",{href:"https://kilowhat.net/flarum/extensions/formulaire",target:"_blank",rel:"noopener"})})),m("table",[m("thead",m("tr",[m("th",a().translator.trans(l+"avatarFormId")),m("th",a().translator.trans(l+"avatarFieldKey")),m("th",a().translator.trans(l+"avatarFieldValue")),m("th",a().translator.trans(l+"avatarAvatarUrl")),m("th")])),m("tbody",[t.map((function(e,a){return m("tr",[m("td",m("input.FormControl",{type:"text",value:e.formId||"",onchange:function(a){e.formId=a.target.value,n.setting(s)(JSON.stringify(t))}})),m("td",m("input.FormControl",{type:"text",value:e.fieldKey||"",onchange:function(a){e.fieldKey=a.target.value,n.setting(s)(JSON.stringify(t))}})),m("td",m("input.FormControl",{type:"text",value:e.fieldValue||"",onchange:function(a){e.fieldValue=a.target.value,n.setting(s)(JSON.stringify(t))}})),m("td",m("input.FormControl",{type:"text",value:e.avatarUrl||"",onchange:function(a){e.avatarUrl=a.target.value,n.setting(s)(JSON.stringify(t))}})),m("td",o().component({className:"Button Button--icon",icon:"fas fa-times",onclick:function(){t.splice(a,1),n.setting(s)(t.length>0?JSON.stringify(t):null)}}))])})),m("tr",m("td",{colspan:5},o().component({className:"Button Button--block",onclick:function(){t.push({formId:"",fieldKey:"",fieldValue:"",avatarUrl:""}),n.setting(s)(JSON.stringify(t))}},a().translator.trans(l+"avatarAdd"))))])])])})).registerPermission({permission:"anonymous-posting.use",icon:"fas fa-user-secret",label:a().translator.trans("clarkwinkelmann-anonymous-posting.admin.permissions.use")},"start").registerPermission({permission:"anonymous-posting.reveal",icon:"fas fa-user-secret",label:a().translator.trans("clarkwinkelmann-anonymous-posting.admin.permissions.reveal")},"moderate").registerPermission({permission:"anonymous-posting.moderate",icon:"fas fa-user-secret",label:a().translator.trans("clarkwinkelmann-anonymous-posting.admin.permissions.moderate")},"moderate")}))})(),module.exports=n})();
//# sourceMappingURL=admin.js.map